<html>
    <!-- for russian symbols -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
    <div align="center">    
        <h1 style="color:blue;">Анонимные предсказания онлайн</h1>
        Введите ваше предсказание, чтобы получить своё
        <br>
        <br>
        <input id="prediction" maxlength = "200"></input> <h4 id="symbolsCounter">Осталось 200 символов<h4>
        <button id="submitButton">Ok</button>
    </div>

    <script>
        var el = document.getElementById("submitButton");
        el.addEventListener("click", modifyText, false);

        async function modifyText(){
            var predictionInput = document.getElementById("prediction")
            let response = await fetch(`/addprediction?prediction=${predictionInput.value}`)
            if(response.ok){
                window.location = response.url
            }
        }

        var predictionel = document.getElementById("prediction");
        predictionel.onkeyup = () => modifyCounter()

        async function modifyCounter(){
            var predictionInput = document.getElementById("symbolsCounter")
            predictionInput.innerText = "Осталось "  + (200 - predictionel.value.length) + " символов"
        }
    </script>
</html>